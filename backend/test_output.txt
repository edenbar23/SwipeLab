[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------< com.swipelab:backend >------------------------
[INFO] Building backend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ backend ---
[INFO] Copying 4 resources from src\main\resources to target\classes
[INFO] Copying 6 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.13.0:compile (default-compile) @ backend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ backend ---
[INFO] Copying 1 resource from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.13.0:testCompile (default-testCompile) @ backend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ backend ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.swipelab.repository.UserRepositoryTest
19:34:03.268 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.swipelab.repository.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
19:34:03.437 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.swipelab.SwipeLabApplication for test class com.swipelab.repository.UserRepositoryTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2025-12-25T19:34:03.875+02:00  INFO 6564 --- [swipelab-backend] [           main] c.s.repository.UserRepositoryTest        : Starting UserRepositoryTest using Java 17.0.17 with PID 6564 (started by AvihooAmos in C:\Users\AvihooAmos\Desktop\Study\Semeter_last\SwipeLab\backend)
2025-12-25T19:34:03.876+02:00 DEBUG 6564 --- [swipelab-backend] [           main] c.s.repository.UserRepositoryTest        : Running with Spring Boot v3.2.3, Spring v6.1.4
2025-12-25T19:34:03.876+02:00  INFO 6564 --- [swipelab-backend] [           main] c.s.repository.UserRepositoryTest        : No active profile set, falling back to 1 default profile: "default"
2025-12-25T19:34:04.427+02:00  INFO 6564 --- [swipelab-backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-25T19:34:04.510+02:00  INFO 6564 --- [swipelab-backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 75 ms. Found 5 JPA repository interfaces.
2025-12-25T19:34:04.571+02:00  INFO 6564 --- [swipelab-backend] [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2025-12-25T19:34:04.796+02:00  INFO 6564 --- [swipelab-backend] [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:46e8c5fb-7002-405a-90e6-f3d8fcef39ad;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2025-12-25T19:34:05.114+02:00  INFO 6564 --- [swipelab-backend] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-25T19:34:05.165+02:00  INFO 6564 --- [swipelab-backend] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-12-25T19:34:05.196+02:00  INFO 6564 --- [swipelab-backend] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-25T19:34:05.443+02:00  INFO 6564 --- [swipelab-backend] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-25T19:34:05.489+02:00  WARN 6564 --- [swipelab-backend] [           main] org.hibernate.dialect.Dialect            : HHH000511: The 2.2.0 version for [org.hibernate.dialect.PostgreSQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 12.0.0. Check the community dialects project for available legacy versions.
2025-12-25T19:34:05.496+02:00  WARN 6564 --- [swipelab-backend] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-25T19:34:06.486+02:00  INFO 6564 --- [swipelab-backend] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    create table classifications (
        id bigserial not null,
        created_at timestamp(6),
        image_id bigint not null,
        label_id bigint not null,
        user_id varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table images (
        id bigserial not null,
        caption varchar(255),
        created_at timestamp(6),
        experiment_id bigint,
        image_url varchar(255) not null,
        is_gold_standard boolean not null,
        priority integer not null,
        thumbnail_url varchar(255),
        correct_label_id bigint,
        task_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table labels (
        id bigserial not null,
        common_name varchar(255),
        description varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table task_experiments (
        task_id bigint not null,
        experiment_id bigint
    )
Hibernate: 
    create table task_recipient_groups (
        task_id bigint not null,
        recipient_group_id bigint
    )
Hibernate: 
    create table task_target_species (
        task_id bigint not null,
        label_id bigint not null
    )
Hibernate: 
    create table tasks (
        id bigserial not null,
        consensus_threshold float(53),
        created_at timestamp(6),
        deadline timestamp(6),
        description varchar(255),
        min_classifications_per_image integer,
        name varchar(255) not null,
        status varchar(255) not null check (status in ('PENDING','COMPLETED','ARCHIVED')),
        updated_at timestamp(6),
        created_by varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        username varchar(255) not null,
        account_locked boolean not null,
        active boolean not null,
        agreement_with_experts float(53),
        correct_gold_classifications integer,
        created_at timestamp(6) not null,
        credibility_score float(53) not null,
        display_name varchar(255),
        email varchar(255) not null,
        email_verification_token varchar(255),
        email_verified boolean not null,
        last_login timestamp(6),
        majority_agreement_score float(53),
        password_hash varchar(255),
        profile_image_url varchar(255),
        provider varchar(255) not null check (provider in ('LOCAL','GOOGLE')),
        provider_id varchar(255),
        refresh_token_hash varchar(255),
        reset_password_token varchar(255),
        reset_token_expiry timestamp(6),
        role varchar(255) not null check (role in ('USER','ADMIN','RESEARCHER')),
        total_classifications integer,
        total_gold_classifications integer,
        updated_at timestamp(6),
        verification_token_expiry timestamp(6),
        primary key (username)
    )
Hibernate: 
    alter table if exists labels 
       drop constraint if exists UK_otpirygk7h1hmo02w999f7kmp
Hibernate: 
    alter table if exists labels 
       add constraint UK_otpirygk7h1hmo02w999f7kmp unique (name)
Hibernate: 
    alter table if exists users 
       drop constraint if exists UK6dotkott2kjsp8vw4d0m25fb7
Hibernate: 
    alter table if exists users 
       add constraint UK6dotkott2kjsp8vw4d0m25fb7 unique (email)
Hibernate: 
    alter table if exists classifications 
       add constraint FKrugqyt2ukjdy4r8bps680n7vv 
       foreign key (image_id) 
       references images
Hibernate: 
    alter table if exists classifications 
       add constraint FK5f8xpoe1cihhw9h0u6x160jia 
       foreign key (label_id) 
       references labels
Hibernate: 
    alter table if exists classifications 
       add constraint FKhdk56hfrce0a2gglnvbrynk4q 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists images 
       add constraint FK7m46t7h8a28s8l353hmcyejyj 
       foreign key (correct_label_id) 
       references labels
Hibernate: 
    alter table if exists images 
       add constraint FKancj7st3d650hm4eos86ui58n 
       foreign key (task_id) 
       references tasks
Hibernate: 
    alter table if exists task_experiments 
       add constraint FK4jtppl9ahm47v1pht4lr6b3ao 
       foreign key (task_id) 
       references tasks
Hibernate: 
    alter table if exists task_recipient_groups 
       add constraint FKc827rrn4p6pdw1hwt01uiupnd 
       foreign key (task_id) 
       references tasks
Hibernate: 
    alter table if exists task_target_species 
       add constraint FKi8h9e8fyi87e5rhc2rp1brfb7 
       foreign key (label_id) 
       references labels
Hibernate: 
    alter table if exists task_target_species 
       add constraint FKacgy6ejk4fdm3io70fa2dy143 
       foreign key (task_id) 
       references tasks
Hibernate: 
    alter table if exists tasks 
       add constraint FK9dgm9t7wn4w3gh57h63g712lo 
       foreign key (created_by) 
       references users
2025-12-25T19:34:06.556+02:00  INFO 6564 --- [swipelab-backend] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-25T19:34:07.166+02:00  INFO 6564 --- [swipelab-backend] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-25T19:34:08.137+02:00  INFO 6564 --- [swipelab-backend] [           main] c.s.repository.UserRepositoryTest        : Started UserRepositoryTest in 4.626 seconds (process running for 5.534)
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
Hibernate: 
    select
        u1_0.username,
        u1_0.account_locked,
        u1_0.active,
        u1_0.agreement_with_experts,
        u1_0.correct_gold_classifications,
        u1_0.created_at,
        u1_0.credibility_score,
        u1_0.display_name,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.last_login,
        u1_0.majority_agreement_score,
        u1_0.password_hash,
        u1_0.profile_image_url,
        u1_0.provider,
        u1_0.provider_id,
        u1_0.refresh_token_hash,
        u1_0.reset_password_token,
        u1_0.reset_token_expiry,
        u1_0.role,
        u1_0.total_classifications,
        u1_0.total_gold_classifications,
        u1_0.updated_at,
        u1_0.verification_token_expiry 
    from
        users u1_0 
    where
        u1_0.username=?
Hibernate: 
    insert 
    into
        users
        (account_locked, active, agreement_with_experts, correct_gold_classifications, created_at, credibility_score, display_name, email, email_verification_token, email_verified, last_login, majority_agreement_score, password_hash, profile_image_url, provider, provider_id, refresh_token_hash, reset_password_token, reset_token_expiry, role, total_classifications, total_gold_classifications, updated_at, verification_token_expiry, username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        u1_0.username,
        u1_0.account_locked,
        u1_0.active,
        u1_0.agreement_with_experts,
        u1_0.correct_gold_classifications,
        u1_0.created_at,
        u1_0.credibility_score,
        u1_0.display_name,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.last_login,
        u1_0.majority_agreement_score,
        u1_0.password_hash,
        u1_0.profile_image_url,
        u1_0.provider,
        u1_0.provider_id,
        u1_0.refresh_token_hash,
        u1_0.reset_password_token,
        u1_0.reset_token_expiry,
        u1_0.role,
        u1_0.total_classifications,
        u1_0.total_gold_classifications,
        u1_0.updated_at,
        u1_0.verification_token_expiry 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    select
        u1_0.username,
        u1_0.account_locked,
        u1_0.active,
        u1_0.agreement_with_experts,
        u1_0.correct_gold_classifications,
        u1_0.created_at,
        u1_0.credibility_score,
        u1_0.display_name,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.last_login,
        u1_0.majority_agreement_score,
        u1_0.password_hash,
        u1_0.profile_image_url,
        u1_0.provider,
        u1_0.provider_id,
        u1_0.refresh_token_hash,
        u1_0.reset_password_token,
        u1_0.reset_token_expiry,
        u1_0.role,
        u1_0.total_classifications,
        u1_0.total_gold_classifications,
        u1_0.updated_at,
        u1_0.verification_token_expiry 
    from
        users u1_0 
    where
        u1_0.username=?
Hibernate: 
    insert 
    into
        users
        (account_locked, active, agreement_with_experts, correct_gold_classifications, created_at, credibility_score, display_name, email, email_verification_token, email_verified, last_login, majority_agreement_score, password_hash, profile_image_url, provider, provider_id, refresh_token_hash, reset_password_token, reset_token_expiry, role, total_classifications, total_gold_classifications, updated_at, verification_token_expiry, username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    select
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
Hibernate: 
    select
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
[ERROR] Tests run: 4, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 6.156 s <<< FAILURE! -- in com.swipelab.repository.UserRepositoryTest
[ERROR] com.swipelab.repository.UserRepositoryTest.findByUsername_ShouldReturnUser_WhenExists -- Time elapsed: 0.012 s <<< ERROR!
java.lang.Error: 
Unresolved compilation problem: 
	The method password(String) is undefined for the type User.UserBuilder

	at com.swipelab.repository.UserRepositoryTest.findByUsername_ShouldReturnUser_WhenExists(UserRepositoryTest.java:26)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)

[ERROR] com.swipelab.repository.UserRepositoryTest.existsByUsername_ShouldReturnTrue_WhenExists -- Time elapsed: 0.005 s <<< ERROR!
java.lang.Error: 
Unresolved compilation problems: 
	The method existsByUsername(String) is undefined for the type UserRepository
	The method existsByUsername(String) is undefined for the type UserRepository

	at com.swipelab.repository.UserRepositoryTest.existsByUsername_ShouldReturnTrue_WhenExists(UserRepositoryTest.java:63)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   UserRepositoryTest.existsByUsername_ShouldReturnTrue_WhenExists:63  Unresolved compilation problems: 
	The method existsByUsername(String) is undefined for the type UserRepository
	The method existsByUsername(String) is undefined for the type UserRepository

[ERROR]   UserRepositoryTest.findByUsername_ShouldReturnUser_WhenExists:26  Unresolved compilation problem: 
	The method password(String) is undefined for the type User.UserBuilder

[INFO] 
[ERROR] Tests run: 4, Failures: 0, Errors: 2, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  8.863 s
[INFO] Finished at: 2025-12-25T19:34:09+02:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project backend: 
[ERROR] 
[ERROR] Please refer to C:\Users\AvihooAmos\Desktop\Study\Semeter_last\SwipeLab\backend\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
