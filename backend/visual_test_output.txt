[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------< com.swipelab:backend >------------------------
[INFO] Building backend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ backend ---
[INFO] Copying 4 resources from src\main\resources to target\classes
[INFO] Copying 4 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.13.0:compile (default-compile) @ backend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ backend ---
[INFO] Copying 2 resources from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.13.0:testCompile (default-testCompile) @ backend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ backend ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.swipelab.VisualSchemaTest
20:05:11.700 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.swipelab.VisualSchemaTest]: VisualSchemaTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
20:05:11.796 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.swipelab.SwipeLabApplication for test class com.swipelab.VisualSchemaTest

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.3)

2025-12-25T20:05:12.279+02:00  INFO 23340 --- [swipelab-backend] [           main] com.swipelab.VisualSchemaTest            : Starting VisualSchemaTest using Java 17.0.17 with PID 23340 (started by AvihooAmos in C:\Users\AvihooAmos\Desktop\Study\Semeter_last\SwipeLab\backend)
2025-12-25T20:05:12.280+02:00 DEBUG 23340 --- [swipelab-backend] [           main] com.swipelab.VisualSchemaTest            : Running with Spring Boot v3.2.3, Spring v6.1.4
2025-12-25T20:05:12.280+02:00  INFO 23340 --- [swipelab-backend] [           main] com.swipelab.VisualSchemaTest            : The following 1 profile is active: "integration"
2025-12-25T20:05:13.411+02:00  INFO 23340 --- [swipelab-backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-25T20:05:13.533+02:00  INFO 23340 --- [swipelab-backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 112 ms. Found 8 JPA repository interfaces.
2025-12-25T20:05:14.225+02:00  INFO 23340 --- [swipelab-backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-25T20:05:14.484+02:00  INFO 23340 --- [swipelab-backend] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-12-25T20:05:14.485+02:00  INFO 23340 --- [swipelab-backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-25T20:05:14.582+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.22.3 by Redgate
2025-12-25T20:05:14.582+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi
2025-12-25T20:05:14.582+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.c.internal.license.VersionPrinter    : 
2025-12-25T20:05:14.639+02:00  INFO 23340 --- [swipelab-backend] [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:testdb (H2 2.2)
2025-12-25T20:05:14.647+02:00  WARN 23340 --- [swipelab-backend] [           main] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-25T20:05:14.674+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-25T20:05:14.679+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.019s)
2025-12-25T20:05:14.689+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-25T20:05:14.719+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-25T20:05:14.732+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - init schema"
2025-12-25T20:05:14.784+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - add gamification"
2025-12-25T20:05:14.799+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - add gold images"
2025-12-25T20:05:14.807+02:00  INFO 23340 --- [swipelab-backend] [           main] o.f.core.internal.command.DbMigrate      : Successfully applied 3 migrations to schema "PUBLIC", now at version v3 (execution time 00:00.048s)
2025-12-25T20:05:14.939+02:00  INFO 23340 --- [swipelab-backend] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-25T20:05:15.002+02:00  INFO 23340 --- [swipelab-backend] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-12-25T20:05:15.034+02:00  INFO 23340 --- [swipelab-backend] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-25T20:05:15.269+02:00  INFO 23340 --- [swipelab-backend] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-25T20:05:15.316+02:00  WARN 23340 --- [swipelab-backend] [           main] org.hibernate.dialect.Dialect            : HHH000511: The 2.2.0 version for [org.hibernate.dialect.PostgreSQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 12.0.0. Check the community dialects project for available legacy versions.
2025-12-25T20:05:15.323+02:00  WARN 23340 --- [swipelab-backend] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-25T20:05:16.337+02:00  INFO 23340 --- [swipelab-backend] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-25T20:05:16.356+02:00  INFO 23340 --- [swipelab-backend] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-25T20:05:17.076+02:00  INFO 23340 --- [swipelab-backend] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-25T20:05:18.174+02:00  WARN 23340 --- [swipelab-backend] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-25T20:05:19.176+02:00  INFO 23340 --- [swipelab-backend] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6a151f1a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d893815, org.springframework.security.web.context.SecurityContextHolderFilter@36e74495, org.springframework.security.web.header.HeaderWriterFilter@156aba9a, org.springframework.web.filter.CorsFilter@75600bdb, org.springframework.security.web.authentication.logout.LogoutFilter@2f6601f4, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@29fe45a3, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1500416c, com.swipelab.security.JwtAuthenticationFilter@3b2317b7, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5d7efdb4, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7bf56370, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e5ca5fe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@49e35c6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39da5edb, org.springframework.security.web.session.SessionManagementFilter@4148a617, org.springframework.security.web.access.ExceptionTranslationFilter@adeb5a6, org.springframework.security.web.access.intercept.AuthorizationFilter@73ae7ce4]
2025-12-25T20:05:20.257+02:00  INFO 23340 --- [swipelab-backend] [           main] com.swipelab.VisualSchemaTest            : Started VisualSchemaTest in 8.301 seconds (process running for 9.242)
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended


================ CHECKING DATABASE TABLES =================

Hibernate: 
    select
        u1_0.username,
        u1_0.account_locked,
        u1_0.active,
        u1_0.agreement_with_experts,
        u1_0.correct_gold_classifications,
        u1_0.created_at,
        u1_0.credibility_score,
        u1_0.display_name,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.last_login,
        u1_0.majority_agreement_score,
        u1_0.password_hash,
        u1_0.profile_image_url,
        u1_0.provider,
        u1_0.provider_id,
        u1_0.refresh_token_hash,
        u1_0.reset_password_token,
        u1_0.reset_token_expiry,
        u1_0.role,
        u1_0.total_classifications,
        u1_0.total_gold_classifications,
        u1_0.updated_at,
        u1_0.verification_token_expiry 
    from
        users u1_0 
    where
        u1_0.username=?
Hibernate: 
    insert 
    into
        users
        (account_locked, active, agreement_with_experts, correct_gold_classifications, created_at, credibility_score, display_name, email, email_verification_token, email_verified, last_login, majority_agreement_score, password_hash, profile_image_url, provider, provider_id, refresh_token_hash, reset_password_token, reset_token_expiry, role, total_classifications, total_gold_classifications, updated_at, verification_token_expiry, username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        badges
        (created_at, criteria_json, description, icon_url, name) 
    values
        (?, ?, ?, ?, ?)
--- USERS TABLE ---
Hibernate: 
    select
        u1_0.username,
        u1_0.account_locked,
        u1_0.active,
        u1_0.agreement_with_experts,
        u1_0.correct_gold_classifications,
        u1_0.created_at,
        u1_0.credibility_score,
        u1_0.display_name,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.last_login,
        u1_0.majority_agreement_score,
        u1_0.password_hash,
        u1_0.profile_image_url,
        u1_0.provider,
        u1_0.provider_id,
        u1_0.refresh_token_hash,
        u1_0.reset_password_token,
        u1_0.reset_token_expiry,
        u1_0.role,
        u1_0.total_classifications,
        u1_0.total_gold_classifications,
        u1_0.updated_at,
        u1_0.verification_token_expiry 
    from
        users u1_0
User: visual_tester | Email: visual@test.com | Credibility: 85.5

--- BADGES TABLE ---
Hibernate: 
    select
        b1_0.id,
        b1_0.created_at,
        b1_0.criteria_json,
        b1_0.description,
        b1_0.icon_url,
        b1_0.name 
    from
        badges b1_0
Badge: Bug Exterminator | Desc: Awarded for validating 100 images

================ TEST COMPLETE =================


[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.886 s -- in com.swipelab.VisualSchemaTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  12.795 s
[INFO] Finished at: 2025-12-25T20:05:21+02:00
[INFO] ------------------------------------------------------------------------
